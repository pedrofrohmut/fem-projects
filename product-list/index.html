<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <title>Frontend Mentor | Product list with cart</title>

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">

  <!-- My custom CSS -->
  <link rel="stylesheet" href="../footer.css" media="all">
  <link rel="stylesheet" href="style.css" media="all">

  <!-- Google font: Red Hat Text -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Text:wght@300..700&display=swap" rel="stylesheet">

  <!-- Handlebars template engine -->
  <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.min.js"></script>
</head>
<body>

  <main>
    <h1 class="main-title">Desserts</h1>

    <div id="items-container" class="items-container">
    </div> <!-- items-container -->

    <script id="items-template" type="text/x-handlebars-template">
      {{#each products}}
        <div class="item-card">
          <div class="item-card__img-wrapper">
            <picture>
              <source srcset="{{ image.tablet }}" media="(min-width: 480px)" />
              <source srcset="{{ image.desktop }}" media="(min-width: 768px)" />
              <img class="item-card__image" src="{{ image.mobile }}" alt="">
            </picture>
            <button class="item-card__button">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="20" fill="none" viewBox="0 0 21 20"><g fill="var(--fill, #C73B0F)" clip-path="url(#a)"><path d="M6.583 18.75a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5ZM15.334 18.75a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5ZM3.446 1.752a.625.625 0 0 0-.613-.502h-2.5V2.5h1.988l2.4 11.998a.625.625 0 0 0 .612.502h11.25v-1.25H5.847l-.5-2.5h11.238a.625.625 0 0 0 .61-.49l1.417-6.385h-1.28L16.083 10H5.096l-1.65-8.248Z"/><path d="M11.584 3.75v-2.5h-1.25v2.5h-2.5V5h2.5v2.5h1.25V5h2.5V3.75h-2.5Z"/></g><defs><clipPath id="a"><path fill="#fff" d="M.333 0h20v20h-20z"/></clipPath></defs></svg>
              Add to Cart
            </button>
          </div>
          <div class="item-card__category">{{ category }}</div>
          <div class="item-card__name">{{ name }}</div>
          <div class="item-card__price">${{ price }}</div>
        </div>
      {{/each}}
    </script>

    <!-- Empty Cart -->
    <div class="cart cart-empty">
      <div class="cart__title">Your Cart (0)</div>
      <img class="cart__img" src="./assets/images/illustration-empty-cart.svg" alt="">
      <div class="cart__message">Your added items will appear here</div>
    </div>

    <!-- TODO: Make the filled cart -->
  </main>

  <footer>
    <a href="../index.html">Back to main</a>
  </footer>

  <!-- Script to render the template -->
  <script>
    fetch("./data.json")
      .then(response => response.json())
      .then(products => {
        products.forEach(product => product.price = product.price.toFixed(2))

        // Select the template script and compile it
        const templateSource = document.getElementById("items-template").innerHTML;
        const template = Handlebars.compile(templateSource);

        // Render the template with the data
        const renderedHtml = template({ products });

        // Insert the rendered HTML into the DOM
        document.getElementById("items-container").innerHTML = renderedHtml;
      })
  </script>

</body>
</html>
